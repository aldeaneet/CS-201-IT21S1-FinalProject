package RetailStore;

import javax.swing.*;
import javax.swing.table.DefaultTableModel;
import java.awt.*;
import java.util.List;

public class OrderHistoryView {
    private JFrame frame;
    private JTable orderTable;
    private DefaultTableModel model;
    private List<Order> orderHistory;

    public OrderHistoryView(List<Order> orderHistory) {
        this.orderHistory = orderHistory;
        initialize();
    }

    private void initialize() {
        frame = new JFrame("Order History");
        frame.getContentPane().setBackground(new Color(231, 247, 213));
        frame.setBounds(100, 100, 700, 400);
        frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
        frame.getContentPane().setLayout(null);

        JLabel lblTitle = new JLabel("Order History");
        lblTitle.setHorizontalAlignment(SwingConstants.CENTER);
        lblTitle.setFont(new Font("Arial Rounded MT Bold", Font.BOLD, 20));
        lblTitle.setBounds(10, 10, 670, 30);
        frame.getContentPane().add(lblTitle);

        String[] columnNames = {"Order ID", "Customer", "Date", "Total", "Status"};
        model = new DefaultTableModel(columnNames, 0);
        orderTable = new JTable(model);
        orderTable.setBackground(new Color(253, 251, 210));
        orderTable.setFont(new Font("Arial Rounded MT Bold", Font.PLAIN, 11));
        JScrollPane scrollPane = new JScrollPane(orderTable);
        scrollPane.setBounds(10, 50, 670, 250);
        frame.getContentPane().add(scrollPane);

        JButton btnBack = new JButton("Back");
        btnBack.setBackground(new Color(245, 206, 154));
        btnBack.setFont(new Font("Arial Rounded MT Bold", Font.PLAIN, 11));
        btnBack.setBounds(278, 311, 150, 40);
        frame.getContentPane().add(btnBack);

        for (Order order : orderHistory) {
            model.addRow(new Object[]{order.getOrderId(), order.getCustomerName(), order.getOrderDate(),
                                      "$" + order.getTotalAmount(), order.getStatus()});
        }

        btnBack.addActionListener(e -> frame.dispose());
    }

    public void display() {
        frame.setVisible(true);
    }
}
